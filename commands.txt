from news.models import *


User.objects.create_user('Sample NameX')
User.objects.create_user('Sample NameY')

user_x = User.objects.get(pk=1)
user_y = User.objects.get(pk=2)

Author.objects.create(user=user_x)
Author.objects.create(user=user_y)
 
for category in ('politics', 'economics', 'education', 'healthcare'):
     Category.objects.create(name=category)

categories1 = Category.objects.filter(pk__lte=2)
article1 = Post.objects.create(author=Author.objects.get(pk=1), post_type='AR', title='How politics affect economy', content='Politics and economy text')
article1.categories.add(*categories1)
article1.save()

categories2 = Category.objects.filter(pk__gt=2) 
article2 = Post.objects.create(author=Author.objects.get(pk=2), post_type='AR', title='How high quality education makes our life better', content='Education and healthcare text')
article2.categories.add(*categories2)
article2.save()

categories3 = Category.objects.filter(pk__in=[3, 4])
news1 = Post.objects.create(author=Author.objects.get(pk=2), post_type='NE', title='Private education: is it even profitable?', content='Economics and education text') 
news1.categories.add(*categories3)
news1.save()

comment1 = Comment.objects.create(post=article1, user=user_y, content='Nice article by Sample NameX! Keep on!')
comment2 = Comment.objects.create(post=article2, user=user_x, content='Nice article by Sample NameY! Keep on!') 
comment3 = Comment.objects.create(post=news1, user=user_x, content='Nice news piece by Sample NameY! Keep on!') 
comment4 = Comment.objects.create(post=news1, user=user_y, content='Thank you for your kind words!')

article1.like()
article2.like()
news1.like()
news1.dislike()
news1.like()
news1.like()
article1.like()
article1.like()

for author in Author.objects.all():
    author.update_rating()

best_user = Author.objects.all().order_by('-rating').first()
print(best_user.user.username, best_user.rating)